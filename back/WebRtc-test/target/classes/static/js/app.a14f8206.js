(function(){"use strict";var e={706:function(e,o,t){var n=t(6252),r=t(9963),i=t(3577);function a(e,o,t,r,a,s){const c=(0,n.up)("router-view"),d=(0,n.up)("b-container");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n._)("div",{id:"app",class:(0,i.C_)(["d-flex flex-column flex-nowrap",[e.$root.theme?"light":"dark"]])},[(0,n.Wm)(c)],2),(0,n.Wm)(d,{toast:{root:!0},fluid:"sm",position:"position-fixed",style:{top:"50px",left:"-200px"}})],64)}var s={setup(){let e=void 0==JSON.parse(localStorage.getItem("theme"))||JSON.parse(localStorage.getItem("theme")),o=JSON.parse(void 0!=localStorage.getItem("sidebar")&&JSON.parse(localStorage.getItem("sidebar")));return o?document.documentElement.style.setProperty("--size-w-side-hover","64px"):document.documentElement.style.setProperty("--size-w-side-hover","200px"),{theme:e,sidebar:o}}},c=t(3744);const d=(0,c.Z)(s,[["render",a]]);var m=d,u=(t(6699),t(2119)),l=t(8544),g=t(6455),f=t.n(g);const p=e=>async(o,t,n)=>{const r=l.Z.getters.isAuthenticated;e&&!r?(o.path.includes("studyroom")&&l.Z.commit("SET_NEXT_ROOM",o.path),await f().fire({icon:"warning",title:"로그인이 필요한 서비스 입니다",timer:3e3}),n("/account/login")):!e&&r?n("/main"):n()},h=[{path:"/",name:"home",redirect:"/home",beforeEnter:p(!1),component:()=>t.e(614).then(t.bind(t,2614)),children:[{path:"/home",name:"home.content",component:()=>t.e(553).then(t.bind(t,8784))}]},{path:"/main",component:()=>Promise.all([t.e(173),t.e(720)]).then(t.bind(t,6720)),beforeEnter:p(!0),children:[{path:"",name:"main.lobby",component:()=>Promise.all([t.e(173),t.e(465)]).then(t.bind(t,7608))},{path:"setting/profile",name:"setting",component:()=>Promise.all([t.e(173),t.e(957)]).then(t.bind(t,9957))},{path:"planner",name:"main.planner",component:()=>Promise.all([t.e(173),t.e(611),t.e(101)]).then(t.bind(t,4611))},{path:"friends",name:"main.share",component:()=>Promise.all([t.e(173),t.e(920)]).then(t.bind(t,8920))},{path:"alarm",name:"main.alarm",component:()=>Promise.all([t.e(173),t.e(611),t.e(400)]).then(t.bind(t,9336))}]},{path:"/account",name:"account",redirect:"/account/login",component:()=>t.e(332).then(t.bind(t,1332)),beforeEnter:p(!1),children:[{path:"login",name:"account.login",component:()=>Promise.all([t.e(173),t.e(797)]).then(t.bind(t,4797))},{path:"find",name:"account.find",component:()=>Promise.all([t.e(173),t.e(469)]).then(t.bind(t,469))}]},{path:"/studyroom",name:"studyroom",beforeEnter:p(!0),component:()=>Promise.all([t.e(173),t.e(611),t.e(712)]).then(t.bind(t,3435)),children:[{path:":roomnum",name:"studyroom.inroom",component:()=>Promise.all([t.e(173),t.e(611),t.e(712)]).then(t.bind(t,3435))}]},{path:"/setting",component:()=>Promise.all([t.e(173),t.e(997)]).then(t.bind(t,9997)),children:[{path:"",name:"setting.list",component:()=>t.e(581).then(t.bind(t,5581))},{path:"profile",name:"setting.profile",component:()=>Promise.all([t.e(173),t.e(957)]).then(t.bind(t,9957))}]}],v=(0,u.p7)({history:(0,u.PO)(),routes:h});var b=v,S=t(1595),T=t(6825),k=t(1763);b.afterEach(((e,o)=>{const t=void 0===e.meta.title?"YaZanya":e.meta.title;(0,n.Y3)((()=>{console.debug(o),document.title=t}))})),(0,r.ri)(m).use(b).use(l.Z).use(T.eH).use(T.IF).use(k.ZP).component("Popper",S.Z).mount("#app")},8544:function(e,o,t){t.d(o,{Z:function(){return h}});var n=t(3907),r=t(8164);const i={state:{token:{accessToken:r.ZP.getAccessToken(),refreshToken:r.ZP.getRefreshToken()},isLogined:!!r.ZP.getAccessToken(),userID:r.ZP.getID(),userNum:r.ZP.getNum(),nextRoom:""},getters:{getAccessToken:function(e){return e.token.accessToken},getRefreshToken:function(e){return e.token.refreshToken},isAuthenticated:function(e){return e.isLogined},getUserID:function(e){return e.userID},getUserNum:function(e){return e.userNum}},mutations:{SET_ISLOGINED:function(e,o){e.isLogined=o},SET_ACCESS_TOKEN:function(e,o){e.token.accessToken=o,r.ZP.saveAccessToken(o)},REMOVE_ACCESS_TOKEN:function(e){e.token.accessToken="",r.ZP.destroyAccessToken()},SET_REFRESH_TOKEN:function(e,o){e.token.refreshToken=o,r.ZP.saveRefreshToken(o)},REMOVE_REFRESH_TOKEN:function(e,o){e.token.refreshToken="",r.ZP.destroyRefreshToken(o)},SET_USER_ID:function(e,o){e.userID=o,r.ZP.saveID(o)},REMOVE_USER_ID:function(e){e.userID="",r.ZP.destroyID()},SET_USER_NUM:function(e,o){e.userNum=o,r.ZP.saveNum(o)},REMOVE_USER_NUM:function(e){e.userNum="",r.ZP.destroyNum()},SET_NEXT_ROOM:function(e,o){e.nextRoom=o}},actions:{logout:function(e){return new Promise((o=>{setTimeout((function(){e.commit("SET_ISLOGINED",!1),e.commit("REMOVE_ACCESS_TOKEN"),e.commit("REMOVE_REFRESH_TOKEN"),e.commit("REMOVE_USER_ID"),e.commit("REMOVE_USER_NUM"),o({})}),500)}))},login:function(e,o){e.commit("SET_ISLOGINED",!0),e.commit("SET_ACCESS_TOKEN",o["access-token"]),e.commit("SET_REFRESH_TOKEN",o["refresh-token"]),e.commit("SET_USER_ID",o["id"])}}};function a(e){this.name=e,Object.defineProperty(this,"rtcPeer",{writable:!0});var o,t=document.createElement("video");t.id="video-"+e,t.autoplay=!0,t.controls=!1,console.log("avoid error "+o),this.getVideoElement=function(){return t},this.handleAudio=function(e){this.rtcPeer&&(this.rtcPeer.audioEnabled=e)},this.handleVideo=function(e){this.rtcPeer&&(console.log("videoEnagled"),this.rtcPeer.videoEnabled=e)},this.offerToReceiveVideo=function(o,t){if(o)return console.error("sdp offer error");console.log("Invoking SDP offer callback function");var n={id:"receiveVideoFrom",sender:e,sdpOffer:t};h.commit("sendMessage",n)},this.onIceCandidate=function(o){console.log("Local candidate"+JSON.stringify(o));var t={id:"onIceCandidate",candidate:o,name:e};h.commit("sendMessage",t)},this.dispose=function(){console.log("Disposing participant "+this.name),this.rtcPeer.dispose()}}var s=t(8181);function c(e,o,t,n,r=!0,i=!0){var c={audio:!0,video:{mandatory:{maxFrameRate:15,minFrameRate:15}}};console.log(t+" registered in room "+n);var d=new a(t);o[t]=d;var l=d.getVideoElement(),g={localVideo:l,mediaConstraints:c,dataChannels:!0,dataChannelConfig:{onmessage:u},onicecandidate:d.onIceCandidate.bind(d)};d.rtcPeer=new s.U.WebRtcPeerSendonly(g,(function(e){if(e)return console.error(e);this.generateOffer(d.offerToReceiveVideo.bind(d)),d.handleVideo(r),d.handleAudio(i)})),e.data.forEach((e=>m(e,o,r,i)))}function d(e,o){console.log("New participant "+e.name+" has been arived"),m(e.name,o)}function m(e,o,t=!0,n=!0){var r=new a(e);o[e]=r;var i=r.getVideoElement(),c={remoteVideo:i,dataChannels:!0,dataChannelConfig:{onmessage:u},onicecandidate:r.onIceCandidate.bind(r)};r.rtcPeer=new s.U.WebRtcPeerRecvonly(c,(function(e){if(e)return console.error(e);this.generateOffer(r.offerToReceiveVideo.bind(r)),r.handleVideo(t),r.handleAudio(n)}))}function u(e){h.commit("recieveData",e.data)}function l(e,o){console.log("Participant "+e.name+" left");var t=o[e.name];t.dispose(),delete o[e.name]}function g(e,o){o[e.name].rtcPeer.processAnswer(e.sdpAnswer,(function(e){if(e)return console.error(e)}))}const f={state(){return{ws:null,participants:{},isSocketConnected:!1,chat_list:[],user:null,room:null,roomLeaveTriggerFlag:0,yaZanyaTrigger:{}}},getters:{getParticipants(e){return e.participants},getParticipantsCount(e){return Object.keys(e.participants).length},getChatList(e){return e.chat_list},getRoom(e){return null==e.room?"":e.room},isUsingPomodoro(e){return null!=e.room&&e.room.roomRestTime>0},getRoomStartTime(e){return null==e.room?"":new Date(e.room.roomStartTime)},getRoomStudyTime(e){return null==e.room?1:60*e.room.roomStudyTime},getRoomRestTime(e){return null==e.room?0:60*e.room.roomRestTime},isEntered(e){return null!=e.room},getRoomName(e){return null!=e.room?e.room.roomName:""},isPrivateRoom(e){return null==e.room||e.room.roomHasPw},isVideoEnabled(e){return!e.room||e.room.roomVideo},isAudioEnabled(e){return!e.room||e.room.roomSound},getNickname(e){return null!=e.user?e.user.userNickname:""},getRoomUserId(e){return null!=e.user?e.user.userId:""},isRoomHost(e){return null!=e.user&&null!=e.room&&e.room.userNum==e.user.userNum},getLeaveTriggerFlag(e){return e.roomLeaveTriggerFlag},getYaZanyaTriggerCode(e){return e.yaZanyaTrigger.code}},mutations:{initSocket(e){console.log("Web Socket Init"),e.ws=new WebSocket("wss://i7b310.p.ssafy.io/groupcall"),e.ws.onopen=()=>{console.log("Web Socket Opened"),e.isSocketConnected=!0,e.ws.onmessage=function(o){var t=JSON.parse(o.data);switch(console.info("Received message: "+o.data),t.id){case"existingParticipants":c(t,e.participants,e.user.userNickname,e.room.roomNum,e.room.roomVideo,e.room.roomSound);break;case"newParticipantArrived":d(t,e.participants);break;case"participantLeft":l(t,e.participants);break;case"receiveVideoAnswer":g(t,e.participants);break;case"iceCandidate":e.participants[t.name].rtcPeer.addIceCandidate(t.candidate,(function(e){e&&console.error("Error adding candidate: "+e)}));break;default:console.error("Unrecognized message",t)}},this.commit("joinRoom")},e.ws.onerror=()=>{console.log("Web Socket Error"),e.isSocketConnected=!1}},closeSocket(e){e.isSocketConnected&&(console.log("close Socket"),e.isSocketConnected=!1,e.ws.onclose=()=>{},e.ws.close())},sendMessage(e,o){if(e.isSocketConnected){var t=JSON.stringify(o);console.log("Sending message: "+t),e.ws.send(t)}},joinRoom(e){var o={id:"joinRoom",name:e.user.userNickname,room:e.room.roomNum};this.commit("sendMessage",o)},disposeAll(e){for(var o in e.participants)e.participants[o].dispose()},setRoomInfo(e,o){e.room=o},setUserInfo(e,o){e.user=o},setParticipants(e,o){e.participants=o},setChatList(e,o){e.chat_list=o},addChat(e,o){e.chat_list.push(o)},recieveData(e,o){let t=o.split(",");console.log("recieved ",t);let n="";switch(t[0]){case"chat":for(let e=4;e<t.length;e++)n+=t[e];this.commit("addChat",{senderId:t[1],senderName:t[2],profile:t[3],message:n});break;case"kicked":t[1]===e.user.userNickname&&(e.roomLeaveTriggerFlag=2);break;case"closed":e.roomLeaveTriggerFlag=1;break;case"YaZanya":t[1]===e.user.userNickname&&(e.yaZanyaTrigger={code:t[2],sender:t[3]},console.log("triggered",e.yaZanyaTrigger));break}},sendChat(e,o){for(var t in console.log("chat sended ",o),e.participants)e.participants[t].rtcPeer.send("chat,"+o.senderId+","+o.senderName+","+o.profile+","+o.message)},kickUser(e,o){e.participants[e.user.userNickname].rtcPeer.send("kicked,"+o)},sendClosed(e){e.participants[e.user.userNickname].rtcPeer.send("closed,")},sendYaZanya(e,o){e.participants[e.user.userNickname].rtcPeer.send("YaZanya,"+o.target+","+o.flag+","+e.user.userNickname)},setYaZanya(e,o){e.yaZanyaTrigger=o}},actions:{leaveRoom({commit:e}){e("sendMessage",{id:"leaveRoom"}),e("closeSocket"),e("disposeAll")},saveRoomInfo({commit:e},o){e("setRoomInfo",o)},saveUserInfo({commit:e},o){e("setUserInfo",o)},initRoom({commit:e}){e("setChatList",[]),e("setParticipants",{}),e("setRoomInfo",null),e("setUserInfo",null)},joinRoom({commit:e}){e("initSocket")},sendChat({commit:e},o){e("addChat",o),e("sendChat",o)},toggleFilter({commit:e},o){var t={id:o?"filterOn":"filterOff"};e("sendMessage",t)}}},p={state:{toggle:{modeToggle:localStorage.getItem("theme"),sidebarToggle:localStorage.getItem("sidebar")}},getters:{getModeToggle:function(e){return e.toggle.modeToggle},getSidebarToggle:function(e){return e.toggle.sidebarToggle}},mutations:{setModeToggle:function(e){e.toggle.modeToggle?e.toggle.modeToggle=!1:e.toggle.modeToggle=!0},setSidebarToggle:function(e){e.toggle.sidebarToggle?e.toggle.sidebarToggle=!1:e.toggle.sidebarToggle=!0}},actions:{setSidebarToggle:function(e){e.commit("setSidebarToggle")},setModeToggle:function(e){e.commit("setModeToggle")}}};var h=(0,n.MT)({modules:{Account:i,Room:f,Setting:p}})},8164:function(e,o,t){const n="id_access_token_b310",r="id_refresh_token_b310",i="id_b310",a="id_no_b310",s=()=>window.sessionStorage.getItem(n),c=e=>{window.sessionStorage.setItem(n,e)},d=()=>{window.sessionStorage.removeItem(n)},m=()=>window.sessionStorage.getItem(r),u=e=>{window.sessionStorage.setItem(r,e)},l=()=>{window.sessionStorage.removeItem(r)},g=()=>window.sessionStorage.getItem(i),f=e=>window.sessionStorage.setItem(i,e),p=()=>window.sessionStorage.removeItem(i),h=()=>window.sessionStorage.getItem(a),v=e=>window.sessionStorage.setItem(a,e),b=()=>window.sessionStorage.removeItem(a);o["ZP"]={getAccessToken:s,saveAccessToken:c,destroyAccessToken:d,getRefreshToken:m,saveRefreshToken:u,destroyRefreshToken:l,getID:g,saveID:f,destroyID:p,getNum:h,saveNum:v,destroyNum:b}}},o={};function t(n){var r=o[n];if(void 0!==r)return r.exports;var i=o[n]={id:n,loaded:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}t.m=e,function(){t.amdO={}}(),function(){var e=[];t.O=function(o,n,r,i){if(!n){var a=1/0;for(m=0;m<e.length;m++){n=e[m][0],r=e[m][1],i=e[m][2];for(var s=!0,c=0;c<n.length;c++)(!1&i||a>=i)&&Object.keys(t.O).every((function(e){return t.O[e](n[c])}))?n.splice(c--,1):(s=!1,i<a&&(a=i));if(s){e.splice(m--,1);var d=r();void 0!==d&&(o=d)}}return o}i=i||0;for(var m=e.length;m>0&&e[m-1][2]>i;m--)e[m]=e[m-1];e[m]=[n,r,i]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.f={},t.e=function(e){return Promise.all(Object.keys(t.f).reduce((function(o,n){return t.f[n](e,o),o}),[]))}}(),function(){t.u=function(e){return"js/"+e+"."+{101:"22587336",173:"71ed5626",332:"3373df7b",400:"6a510014",465:"8768bd62",469:"7832f86f",553:"64ee98b4",581:"3f10923b",611:"de8acfb0",614:"136e54ab",712:"495e8c25",720:"201f9eaa",797:"3fed0ab7",920:"f8c7c95b",957:"af9adf41",997:"4ad21704"}[e]+".js"}}(),function(){t.miniCssF=function(e){return"css/"+e+"."+{101:"b435fc5b",332:"96c87701",400:"9d558d9a",465:"c2c332c8",469:"56822ac9",553:"127096c0",581:"d316846e",614:"0063410c",712:"5077d3a3",720:"b0753d07",797:"306a1a5f",920:"1c7823cb",957:"888f036c",997:"8b84e0d6"}[e]+".css"}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={},o="front:";t.l=function(n,r,i,a){if(e[n])e[n].push(r);else{var s,c;if(void 0!==i)for(var d=document.getElementsByTagName("script"),m=0;m<d.length;m++){var u=d[m];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==o+i){s=u;break}}s||(c=!0,s=document.createElement("script"),s.charset="utf-8",s.timeout=120,t.nc&&s.setAttribute("nonce",t.nc),s.setAttribute("data-webpack",o+i),s.src=n),e[n]=[r];var l=function(o,t){s.onerror=s.onload=null,clearTimeout(g);var r=e[n];if(delete e[n],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(e){return e(t)})),o)return o(t)},g=setTimeout(l.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=l.bind(null,s.onerror),s.onload=l.bind(null,s.onload),c&&document.head.appendChild(s)}}}(),function(){t.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){t.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e}}(),function(){t.p="/"}(),function(){var e=function(e,o,t,n){var r=document.createElement("link");r.rel="stylesheet",r.type="text/css";var i=function(i){if(r.onerror=r.onload=null,"load"===i.type)t();else{var a=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.href||o,c=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");c.code="CSS_CHUNK_LOAD_FAILED",c.type=a,c.request=s,r.parentNode.removeChild(r),n(c)}};return r.onerror=r.onload=i,r.href=o,document.head.appendChild(r),r},o=function(e,o){for(var t=document.getElementsByTagName("link"),n=0;n<t.length;n++){var r=t[n],i=r.getAttribute("data-href")||r.getAttribute("href");if("stylesheet"===r.rel&&(i===e||i===o))return r}var a=document.getElementsByTagName("style");for(n=0;n<a.length;n++){r=a[n],i=r.getAttribute("data-href");if(i===e||i===o)return r}},n=function(n){return new Promise((function(r,i){var a=t.miniCssF(n),s=t.p+a;if(o(a,s))return r();e(n,s,r,i)}))},r={143:0};t.f.miniCss=function(e,o){var t={101:1,332:1,400:1,465:1,469:1,553:1,581:1,614:1,712:1,720:1,797:1,920:1,957:1,997:1};r[e]?o.push(r[e]):0!==r[e]&&t[e]&&o.push(r[e]=n(e).then((function(){r[e]=0}),(function(o){throw delete r[e],o})))}}(),function(){var e={143:0};t.f.j=function(o,n){var r=t.o(e,o)?e[o]:void 0;if(0!==r)if(r)n.push(r[2]);else if(101!=o){var i=new Promise((function(t,n){r=e[o]=[t,n]}));n.push(r[2]=i);var a=t.p+t.u(o),s=new Error,c=function(n){if(t.o(e,o)&&(r=e[o],0!==r&&(e[o]=void 0),r)){var i=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;s.message="Loading chunk "+o+" failed.\n("+i+": "+a+")",s.name="ChunkLoadError",s.type=i,s.request=a,r[1](s)}};t.l(a,c,"chunk-"+o,o)}else e[o]=0},t.O.j=function(o){return 0===e[o]};var o=function(o,n){var r,i,a=n[0],s=n[1],c=n[2],d=0;if(a.some((function(o){return 0!==e[o]}))){for(r in s)t.o(s,r)&&(t.m[r]=s[r]);if(c)var m=c(t)}for(o&&o(n);d<a.length;d++)i=a[d],t.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return t.O(m)},n=self["webpackChunkfront"]=self["webpackChunkfront"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(706)}));n=t.O(n)})();
//# sourceMappingURL=app.a14f8206.js.map