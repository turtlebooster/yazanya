"use strict";(self["webpackChunkfront"]=self["webpackChunkfront"]||[]).push([[957],{2745:function(e,s,t){var l=t(8164),a=t(9669),r=t.n(a);s["Z"]={addThumbnail:function(e,s){return new Promise(((t,a)=>{r().post("https://i7b310.p.ssafy.io:8081/B310/room/Thumbnail/"+e,s,{headers:{"Content-Type":"multipart/form-data","access-token":l.ZP.getAccessToken()}}).then((e=>{"success"===e.data?t(!0):a("방 섬네일 업로드 중 문제가 발생하였습니다")})).catch((e=>{a(e)}))}))},addProfileImage:function(e,s){return new Promise(((t,a)=>{r().post("https://i7b310.p.ssafy.io:8081/B310/user/profile/"+e,s,{headers:{"Content-Type":"multipart/form-data","access-token":l.ZP.getAccessToken()}}).then((e=>{"success"===e.data?t(!0):a("프로필 사진 설정 중 문제가 발생하였습니다")})).catch((e=>{a(e)}))}))}}},9957:function(e,s,t){t.r(s),t.d(s,{default:function(){return B}});var l=t(6252),a=t(3577),r=t(9963);const i={class:"d-flex justify-content-center"},n={class:"d-flex flex-column"},o=(0,l._)("h4",{class:"m-2"},"내 프로필 관리",-1),u=(0,l._)("hr",{class:"my-3 me-4"},null,-1),d={class:"d-flex flex-fill align-items-end mb-3 overflow-hidden"},c=(0,l._)("h6",{class:"m-0"},[(0,l._)("i",{class:"bi bi-camera-fill"})],-1),m={class:"d-flex flex-column flex-fill"},f={class:"d-flex justify-content-between",style:{"font-size":"0.8em","vertical-align":"middle"}},p=(0,l._)("label",{for:"userId",class:"ms-4"},"닉네임",-1),b=(0,l.Uk)("중복체크"),h={class:"d-flex flex-column flex-fill mt-4"},g=(0,l._)("label",{for:"userId",class:"ms-4",style:{"font-size":"0.8em"}},"아이디",-1),w={class:"d-flex flex-column flex-fill mt-4"},v=(0,l._)("label",{for:"userId",class:"ms-4",style:{"font-size":"0.8em"}},"비밀번호",-1),x=(0,l.Uk)(" 비밀번호는 4-20글자 사이 영어, 숫자여야 해요 "),k={class:"d-flex flex-column flex-fill mt-3"},y=(0,l._)("label",{for:"userEmail",class:"ms-4",style:{"font-size":"0.8em"}},"이메일",-1),_={class:"d-flex flex-column flex-fill mt-3"},I=(0,l._)("label",{for:"userPw",class:"ms-4",style:{"font-size":"0.8em"}},"내 관심 태그",-1),z=(0,l.Uk)(" 방 태그는 최대 3개까지 지정할 수 있어요 "),C={class:"d-flex flex-column flex-fill mt-3"},P=(0,l._)("label",{for:"userIntroduce",class:"ms-4",style:{"font-size":"0.8em"}},"내 소개",-1),T={class:"d-flex justify-content-between mt-3 mb-2"},U=(0,l.Uk)("저장"),V=(0,l.Uk)("회원 탈퇴");function Z(e,s,t,Z,D,N){const W=(0,l.up)("b-avatar"),H=(0,l.up)("b-button"),j=(0,l.up)("b-form-input"),A=(0,l.up)("b-form-invalid-feedback"),E=(0,l.up)("b-form-tags"),F=(0,l.up)("b-card");return(0,l.wg)(),(0,l.iD)("div",i,[(0,l.Wm)(F,{class:(0,a.C_)(["mt-4 w-50",[e.$root.theme?" ":"custom-dark"]])},{default:(0,l.w5)((()=>[(0,l._)("div",n,[o,u,(0,l._)("div",d,[(0,l.Wm)(W,{src:`${Z.server_link}/showImg/profile/number/${Z.user.userNum}?t=${(new Date).getTime()}`,size:"6em"},null,8,["src"]),(0,l.Wm)(H,{class:"border border-2 rounded-circle px-2",variant:"light",style:{position:"absolute",left:"5.2em"},onClick:s[0]||(s[0]=e=>Z.uploadProfileImg(Z.user.userId))},{default:(0,l.w5)((()=>[c])),_:1}),(0,l._)("div",m,[(0,l._)("div",f,[p,(0,l.Wm)(H,{class:"me-4",pill:"",size:"sm",style:{"font-size":"1em",position:"absolute",right:"1.4em",top:"11em"},onClick:s[1]||(s[1]=e=>Z.nicknameDuplCheck(Z.user.userNickname)),disabled:Z.isDuplChecked},{default:(0,l.w5)((()=>[b])),_:1},8,["disabled"])]),(0,l.Wm)(j,{class:"flex-grow-1 border border-3 border-top-0 border-end-0 border-start-0 mb-2 mx-4",modelValue:Z.user.userNickname,"onUpdate:modelValue":s[2]||(s[2]=e=>Z.user.userNickname=e),onKeyup:s[3]||(s[3]=(0,r.D2)((e=>Z.nicknameDuplCheck(Z.user.userNickname)),["enter"])),style:{"font-size":"1.3em",width:"auto"}},null,8,["modelValue"])])]),(0,l._)("div",h,[g,(0,l.wy)((0,l._)("input",{id:"userId",class:"flex-grow-1 border border-3 border-top-0 border-end-0 border-start-0 mb-2 mx-4","onUpdate:modelValue":s[4]||(s[4]=e=>Z.user.userId=e),style:{"font-size":"1.3em"},disabled:""},null,512),[[r.nr,Z.user.userId]])]),(0,l._)("div",w,[v,(0,l.Wm)(j,{id:"userId",class:"flex-grow-1 border border-3 border-top-0 border-end-0 border-start-0 mb-2 mx-4",modelValue:Z.password,"onUpdate:modelValue":s[5]||(s[5]=e=>Z.password=e),placeholder:"변경할 비밀번호",state:Z.validation.userPw,style:{"font-size":"1.3em",width:"auto"}},null,8,["modelValue","state"]),(0,l.Wm)(A,{class:"ms-4",state:Z.validation.userPw},{default:(0,l.w5)((()=>[x])),_:1},8,["state"])]),(0,l._)("div",k,[y,(0,l.wy)((0,l._)("input",{id:"userEmail",class:"flex-grow-1 border border-3 border-top-0 border-end-0 border-start-0 mb-2 mx-4","onUpdate:modelValue":s[6]||(s[6]=e=>Z.user.userEmail=e),style:{"font-size":"1.3em"},disabled:""},null,512),[[r.nr,Z.user.userEmail]])]),(0,l._)("div",_,[I,(0,l.Wm)(E,{"input-id":"userPw",class:"flex-grow-1 border border-3 border-top-0 border-end-0 border-start-0 mx-4",separator:" ,;",modelValue:Z.hashtags,"onUpdate:modelValue":s[7]||(s[7]=e=>Z.hashtags=e),state:Z.validation.hashTag,placeholder:"관심 태그",duplicateTagText:"중복된 태그가 있어요 ",tagVariant:"success","remove-on-delete":"",style:{"font-size":"1.3em",width:"auto"}},null,8,["modelValue","state"]),(0,l.Wm)(A,{class:"ms-4",state:Z.validation.hashTag},{default:(0,l.w5)((()=>[z])),_:1},8,["state"])]),(0,l._)("div",C,[P,(0,l.wy)((0,l._)("textarea",{id:"userIntrodution",class:"flex-grow-1 border border-3 border-top-0 border-end-0 border-start-0 mb-2 mx-4","onUpdate:modelValue":s[8]||(s[8]=e=>Z.user.profileSelfIntroduce=e),style:{"font-size":"1.3em",resize:"none"},maxlength:"50"},null,512),[[r.nr,Z.user.profileSelfIntroduce]])]),(0,l._)("div",T,[(0,l.Wm)(H,{class:"ms-4",variant:"success",disabled:!Z.validation.isAllOk,onClick:s[9]||(s[9]=e=>Z.saveChange())},{default:(0,l.w5)((()=>[U])),_:1},8,["disabled"]),(0,l.Wm)(H,{class:"me-4",variant:"danger",onClick:s[10]||(s[10]=e=>Z.quit(Z.user.userId))},{default:(0,l.w5)((()=>[V])),_:1})])])])),_:1},8,["class"])])}var D=t(2262),N=t(3907),W=t(2119),H=t(6455),j=t.n(H),A=t(5173),E=t(2745),F={setup(){const e=(0,N.oR)(),s=(0,W.tv)();let t=(0,D.iH)([]),a=(0,D.iH)(""),r=(0,D.iH)(""),i=(0,l.Fl)({get(){return r.value===u.value.userNickname},set(e){i.value=e}});async function n(e){e=e.trim();try{if(e.length<1||e.length>20)throw"닉네임이 형식에 맞지 않습니다\n(1 - 20글자)";await A.Z.checkNicknameDuplicated(e),r.value=u.value.userNickname,j().fire({icon:"success",title:"사용가능한 닉네임입니다",timer:2200})}catch(s){j().fire({icon:"warning",title:s,timer:2200})}}const o=(0,D.qj)({userPw:(0,l.Fl)((()=>""==a.value?null:new RegExp(/^[a-zA-Z0-9]{4,20}$/).test(a.value))),hashTag:(0,l.Fl)((()=>t.value.length<=3&&null)),isAllOk:(0,l.Fl)((()=>!(0==o.userPw||0==o.hashTag||!i.value)))});let u=(0,D.iH)({userNum:-1});async function d(){try{await A.Z.addUserHashTags(u.value.userId,t.value),a.value&&(u.value.userPw=a.value),await A.Z.modifyProfile(u.value),j().fire({icon:"success",title:"회원정보 수정 완료",timer:2200})}catch(e){j().fire({icon:"warning",title:e,timer:2200})}}async function c(t){try{await A.Z.quitAccount(t),await j().fire({icon:"success",title:"회원탈퇴 완료",timer:2200}),await e.dispatch("logout"),s.replace("/home")}catch(l){j().fire({icon:"warning",title:l,timer:2200})}}(0,l.wF)((async()=>{try{u.value=await A.Z.getProfile(e.getters.getUserID),r.value=u.value.userNickname,t.value=await A.Z.getHashTags(u.value.userId)}catch(s){j().fire({icon:"warning",title:s,timer:2200})}}));const m=(0,D.iH)("https://i7b310.p.ssafy.io:8081/B310");function f(e){let s=document.createElement("input");s.type="file",s.accept="image/png, image/jpeg",s.click(),s.onchange=async s=>{const t=s.target;if(t.files&&t.files[0]){const s=5242880;t.files[0].size>s&&(j().fire({icon:"warning",title:"파일의 최대 크기는 5MB 입니다"}),t.value="");let a=t.files[0].name,r=a.lastIndexOf("."),i=a.substring(r+1,a.length).toLowerCase();if("png"!==i&&"jpg"!==i)return j().fire({icon:"warning",title:"지원하지 않는 확장자입니다"}),void(t.value="");const n=new FormData;n.append("pic",t.files[0]);try{await E.Z.addProfileImage(e,n)}catch(l){j().fire({icon:"warning",title:l})}}}}return{server_link:m,user:u,hashtags:t,password:a,validation:o,isDuplChecked:i,prev_userNickname:r,saveChange:d,quit:c,uploadProfileImg:f,nicknameDuplCheck:n}}},$=t(3744);const q=(0,$.Z)(F,[["render",Z]]);var B=q}}]);
//# sourceMappingURL=957.af9adf41.js.map